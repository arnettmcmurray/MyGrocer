<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MyGrocer — Login/Register</title>

    <link rel="icon" href="data:," />

    <script defer src="/js/config.js"></script>
    <script defer src="/js/ui.js"></script>
    <script
      defer
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>

  <body>
    <main class="container" x-data="authPage()">
      <h1>MyGrocer</h1>
      <nav>
        <a href="/index.html">Home</a>
        <a href="/pantry.html">Pantry</a>
        <a href="/recipes.html">Recipes</a>
      </nav>

      <article>
        <h2 x-text="mode === 'login' ? 'Login' : 'Register'"></h2>

        <div x-show="mode === 'register'" style="margin-bottom: 0.5rem">
          <label>Name <input type="text" x-model="name" /></label>
        </div>

        <label>Email <input type="email" x-model="email" /></label>
        <label>Password <input type="password" x-model="password" /></label>

        <div style="color: crimson" x-show="error" x-text="error"></div>
        <div style="color: seagreen" x-show="success" x-text="success"></div>

        <button @click="submit" :aria-busy="loading" :disabled="loading">
          <span
            x-show="!loading"
            x-text="mode === 'login' ? 'Login' : 'Create Account'"
          ></span>
          <span x-show="loading">Working…</span>
        </button>

        <p><a href="#" @click.prevent="toggleMode()">Switch</a></p>
      </article>
    </main>
  </body>
</html>
