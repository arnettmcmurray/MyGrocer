<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MyGrocer — Recipes</title>

    <link rel="icon" href="data:," />

    <script defer src="/js/config.js"></script>
    <script defer src="/js/ui.js"></script>
    <script
      defer
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>

  <body>
    <main class="container" x-data="recipesPage()">
      <h2>Find Foods & Nutrition</h2>

      <form @submit.prevent="search()">
        <input x-model="q" placeholder="e.g., yogurt, chicken breast" />
        <button :disabled="!q || loading" :aria-busy="loading">Search</button>
      </form>

      <button
        @click="autoFromPantry()"
        :disabled="loading"
        :aria-busy="loading"
      >
        Suggest From My Pantry
      </button>

      <div
        role="alert"
        style="color: crimson"
        x-show="error"
        x-text="error"
      ></div>

      <p x-show="loading">Searching…</p>

      <div class="grid" style="margin-top: 1rem">
        <template x-for="r in results">
          <article>
            <strong x-text="r.name"></strong>
            <small x-text="r.brand ? ` · ${r.brand}` : ''"></small>
            <img x-show="r.img" :src="r.img" style="max-height: 100px" />
            <p>
              kcal: <span x-text="r.kcal ?? 'n/a'"></span><br />
              protein: <span x-text="r.protein ?? 'n/a'"></span><br />
              fat: <span x-text="r.fat ?? 'n/a'"></span><br />
              carbs: <span x-text="r.carbs ?? 'n/a'"></span>
            </p>
          </article>
        </template>
      </div>

      <nav>
        <a href="/index.html">Home</a>
        <a href="/pantry.html">Pantry</a>
      </nav>
    </main>
  </body>
</html>
