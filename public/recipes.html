<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MyGrocer — Recipes</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="/js/config.js"></script>
    <script defer src="/js/ui.js"></script>
    <script
      defer
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>

  <body class="bg-gray-900 text-gray-100">
    <main
      class="max-w-4xl mx-auto mt-10 p-6 bg-gray-800 rounded-lg shadow-lg"
      x-data="recipesPage()"
    >
      <h2 class="text-2xl font-semibold mb-6">Find Foods & Nutrition</h2>

      <form @submit.prevent="search()" class="flex space-x-3 mb-4">
        <input
          x-model="q"
          placeholder="e.g., yogurt, chicken breast"
          class="flex-1 px-4 py-2 rounded bg-gray-700 border border-gray-600 focus:ring-2 focus:ring-blue-500"
        />
        <button
          :disabled="!q || loading"
          class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white"
        >
          Search
        </button>
      </form>

      <button
        @click="autoFromPantry()"
        :disabled="loading"
        class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded text-white"
      >
        Suggest From My Pantry
      </button>

      <div class="text-red-400 mt-4" x-show="error" x-text="error"></div>

      <p x-show="loading" class="mt-4">Searching…</p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
        <template x-for="r in results">
          <article class="bg-gray-700 p-4 rounded-lg shadow">
            <strong class="text-lg" x-text="r.name"></strong>
            <small
              class="text-gray-300"
              x-text="r.brand ? ' · ' + r.brand : ''"
            ></small>
            <img x-show="r.img" :src="r.img" class="mt-2 max-h-24" />
            <p class="mt-2 text-sm text-gray-300">
              kcal: <span x-text="r.kcal ?? 'n/a'"></span><br />
              protein: <span x-text="r.protein ?? 'n/a'"></span><br />
              fat: <span x-text="r.fat ?? 'n/a'"></span><br />
              carbs: <span x-text="r.carbs ?? 'n/a'"></span>
            </p>
          </article>
        </template>
      </div>

      <nav class="mt-8 space-x-6">
        <a
          href="/frontend_live/index.html"
          class="hover:underline text-blue-400"
          >Home</a
        >
        <a
          href="/frontend_live/pantry.html"
          class="hover:underline text-blue-400"
          >Pantry</a
        >
      </nav>
    </main>
  </body>
</html>
