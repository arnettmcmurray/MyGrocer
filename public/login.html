<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MyGrocer — Login/Register</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="/js/config.js"></script>
    <script defer src="/js/ui.js"></script>
    <script
      defer
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>

  <body
    class="bg-gray-900 text-gray-100 flex items-center justify-center min-h-screen"
  >
    <main
      class="bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-md"
      x-data="authPage()"
    >
      <h1 class="text-2xl font-bold mb-6 text-center text-green-400">
        MyGrocer
      </h1>

      <h2
        class="text-xl font-semibold mb-4"
        x-text="mode === 'login' ? 'Login' : 'Register'"
      ></h2>

      <div x-show="mode === 'register'" class="mb-4">
        <label class="block mb-1">Name</label>
        <input
          type="text"
          x-model="name"
          class="w-full px-3 py-2 rounded bg-gray-700 border border-gray-600"
        />
      </div>

      <label class="block mb-1">Email</label>
      <input
        type="email"
        x-model="email"
        class="w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 mb-3"
      />

      <label class="block mb-1">Password</label>
      <input
        type="password"
        x-model="password"
        class="w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 mb-4"
      />

      <div class="text-red-400 mb-2" x-show="error" x-text="error"></div>
      <div class="text-green-400 mb-2" x-show="success" x-text="success"></div>

      <button
        @click="submit"
        class="w-full bg-green-600 hover:bg-green-700 py-2 rounded text-white font-semibold mb-3"
        :disabled="loading"
      >
        <span
          x-show="!loading"
          x-text="mode === 'login' ? 'Login' : 'Create Account'"
        ></span>
        <span x-show="loading">Working…</span>
      </button>

      <p class="text-center">
        <a
          href="#"
          @click.prevent="toggleMode()"
          class="text-blue-400 hover:underline"
          >Switch</a
        >
      </p>
    </main>
  </body>
</html>
